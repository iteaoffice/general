build_settings:
    ignore:
        - "vendor"
        - "tests"
    verbose: true
    mysql:
        host: "localhost"
        user: "phpci"
        pass: "AB4VF"

setup:
    mysql:
        - "DROP DATABASE IF EXISTS test;"
        - "CREATE DATABASE test;"
        - "GRANT ALL PRIVILEGES ON test.* TO phpci@'localhost' IDENTIFIED BY 'AB4VF';"
    composer:
        action: "install"

test:
    php_unit:
        config:
            - "phpunit.xml.dist"
        run_from: "phpunit/"
    php_code_sniffer:
        standard: "PSR2"
    php_cpd:
        allow_failures: true
    php_cs_fixer:
           verbose: true
           dryrun: true
           level: "psr2"
           workingdir: "/src/"

complete:
    mysql:
        - "DROP DATABASE IF EXISTS test;"
    email:
        addresses:
            - "johan.van.der.heide@itea2.org"
            - "andre.hebben@artemis-ia.eu"